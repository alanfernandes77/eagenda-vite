var n=Object.defineProperty;var c=(s,t,e)=>t in s?n(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var i=(s,t,e)=>(c(s,typeof t!="symbol"?t+"":t,e),e);import{T as d}from"./task.repository.local-storage.c35c584e.js";/* empty css              */class l{generateNewId(){const t=Date.now().toString(36),e=Math.random().toString(36).substring(2,8);return`${t}-${e}`}}class h{constructor(){i(this,"id");this.id=new l().generateNewId()}}class a extends h{constructor(e,r,o){super();i(this,"description");i(this,"priority");i(this,"creationDate");o&&(this.id=o),this.description=e,this.priority=r,this.creationDate=new Date().toLocaleString()}}class p{constructor(t,e){i(this,"txtTitle");i(this,"txtSubtitle");i(this,"txtDescription");i(this,"slctPriority");i(this,"btnSave");i(this,"selectedId");if(this.taskRepository=t,this.txtTitle=document.getElementById("title"),this.txtSubtitle=document.getElementById("subtitle"),this.txtDescription=document.getElementById("description"),this.slctPriority=document.getElementById("priority"),this.btnSave=document.getElementById("btn-save"),this.btnSave.addEventListener("click",r=>this.save()),e){this.selectedId=e;const r=this.taskRepository.getById(e);r&&this.fillForm(r)}}save(){const t=this.getTask();this.selectedId?(this.taskRepository.update(t.id,t),window.location.href="task.html",alert(`Tarefa '${t.description}' (${t.id}) editada com sucesso!`)):(this.taskRepository.insert(t),window.location.href="task.html",alert(`Tarefa '${t.description}' (${t.id}) criada com sucesso!`))}fillForm(t){this.txtDescription.value=t.description,this.slctPriority.value=t.priority.toString(),this.txtTitle.innerText="Edi\xE7\xE3o de Tarefa",this.txtSubtitle.innerText="Preencha os campos abaixo para editar a tarefa selecionada"}getTask(){const t=this.txtDescription.value,e=this.slctPriority.value;return this.selectedId?new a(t,e,this.selectedId):new a(t,e)}}const m=new URLSearchParams(window.location.search),u=m.get("id");new p(new d,u);
